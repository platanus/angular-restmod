/**
 * API Bound Models for AngularJS
 * @version v0.18.0 - 2014-08-26
 * @link https://github.com/angular-platanus/restmod
 * @author Ignacio Baixas <ignacio@platan.us>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";var c=a.module("restmod",["ng","platanus.inflector"]);c.provider("restmod",[function(){var a=["RMBuilderExt","RMBuilderRelations"];return{rebase:function(){return Array.prototype.push.apply(a,arguments),this},$get:["RMBuilder",function(b){var c=Array.prototype.slice,d={model:function(d){var e,f=new b;f.loadMixinChain(a),f.loadMixinChain(e=c.call(arguments,1)),f.dsl.setProperty("url",d);var g=f.buildModel();return g.$chain=e,g},mixin:function(){return{$isAbstract:!0,$chain:c.call(arguments,0)}},singleton:function(a){return d.model.apply(this,arguments).$single(a)}};return d}]}}]).factory("model",["restmod",function(a){return a.model}]).factory("mixin",["restmod",function(a){return a.mixin}]),c.factory("RMBuilderExt",["$injector","$parse","inflector","$log","restmod",function(b,c,d,e,f){var g=a.bind,h=a.isFunction,i={setUrlPrefix:function(a){return this.setProperty("urlPrefix",a)},setPrimaryKey:function(a){return this.setProperty("primaryKey",a)},setPacker:function(a){return this.setProperty("packer",a)},disableRenaming:function(){return this.setNameDecoder(!1).setNameEncoder(!1)},attrSerializer:function(a,c,e){return"string"==typeof c&&(c=b.get(d.camelize(c,!0)+"Serializer")),h(c)&&(c=c(e)),c.decode&&this.attrDecoder(a,g(c,c.decode)),c.encode&&this.attrEncoder(a,g(c,c.encode)),this},attrExpression:function(a,b){var d=c(b);return this.on("after-feed",function(){this[a]=d(this)})}};return f.mixin(function(){this.extend("setUrlPrefix",i.setUrlPrefix).extend("setPrimaryKey",i.setPrimaryKey).extend("setPacker",i.setPacker).extend("disableRenaming",i.disableRenaming).extend("attrSerializer",i.attrSerializer,["serialize"])})}]),c.factory("RMBuilderRelations",["$injector","inflector","$log","RMUtils","restmod","RMPackerCache",function(a,c,d,e,f,g){var h={attrAsCollection:function(b,f,g,h,i){return this.attrDefault(b,function(){if("string"==typeof f&&(f=a.get(f),i)){var e=f.$$getDescription(i);e&&"belongs_to"===e.relation||(d.error("Must define an inverse belongsTo relation for inverseOf to work"),i=!1)}var h=this,j=this.$buildScope(f,g||c.parameterize(b)),k=f.$collection(null,j);return i&&k.$on("after-add",function(a){a[i]=h}),k}),(h||g)&&this.attrMap(b,h||g),this.attrDecoder(b,function(a){this[b].$reset().$decode(a)}).attrMask(b,e.WRITE_MASK).attrMeta(b,{relation:"has_many"}),this},attrAsResource:function(b,f,g,h,i){return this.attrDefault(b,function(){if("string"==typeof f&&(f=a.get(f),i)){var e=f.$$getDescription(i);e&&"belongs_to"===e.relation||(d.error("Must define an inverse belongsTo relation for inverseOf to work"),i=!1)}var h=this.$buildScope(f,g||c.parameterize(b)),j=f.$new(null,h);return i&&(j[i]=this),j}),(h||g)&&this.attrMap(b,h||g),this.attrDecoder(b,function(a){this[b].$decode(a)}).attrMask(b,e.WRITE_MASK).attrMeta(b,{relation:"has_one"}),this},attrAsReference:function(c,d,f,h){function i(){"string"==typeof d&&(d=a.get(d))}return this.attrDefault(c,null).attrMask(c,e.WRITE_MASK).attrMeta(c,{relation:"belongs_to"}),this.attrDecoder(c,function(a){return null===a?null:(i(),void(this[c]&&this[c].$pk===d.$$inferKey(a)?this[c].$decode(a):this[c]=d.$buildRaw(a)))}),f!==!1&&this.attrMap(c+"Id",f||"*",!0).attrDecoder(c+"Id",function(a){a!==b&&(this[c]&&this[c].$pk===a||(null!==a&&a!==!1?(i(),this[c]=g.resolve(d.$new(a)),h&&this[c].$fetch()):this[c]=null))}).attrEncoder(c+"Id",function(){return this[c]?this[c].$pk:null}),this},attrAsReferenceToMany:function(b,d,f){function h(){"string"==typeof d&&(d=a.get(d))}function i(a,b){h(),b.length=0;for(var c=0,e=a.length;e>c;c++)b.push("object"==typeof a[c]?d.$buildRaw(a[c]):g.resolve(d.$new(a[c])))}if(this.attrDefault(b,function(){return[]}).attrMask(b,e.WRITE_MASK).attrMeta(b,{relation:"belongs_to_many"}),this.attrDecoder(b,function(a){a&&i(a,this[b])}),f!==!1){var j=c.singularize(b)+"Ids";this.attrMap(j,f||"*",!0).attrDecoder(j,function(a){a&&i(a,this[b])}).attrEncoder(j,function(){for(var a=[],c=this[b],d=0,e=c.length;e>d;d++)a.push(c[d].$pk);return a})}return this}};return f.mixin(function(){this.extend("attrAsCollection",h.attrAsCollection,["hasMany","path","source","inverseOf"]).extend("attrAsResource",h.attrAsResource,["hasOne","path","source","inverseOf"]).extend("attrAsReference",h.attrAsReference,["belongsTo","key","prefetch"]).extend("attrAsReferenceToMany",h.attrAsReferenceToMany,["belongsToMany","keys"])})}]),c.factory("RMBuilder",["$injector","inflector","RMUtils","RMSerializerFactory","RMModelFactory",function(b,c,d,e,f){function g(){var a={url:null,urlPrefix:null,primaryKey:"id",packer:null},b=[],g=e(),j=[],q={},r={init:["attrDefault"],mask:["attrMask"],ignore:["attrMask"],map:["attrMap","force"],decode:["attrDecoder","param","chain"],encode:["attrEncoder","param","chain"]};this.dsl={describe:function(a){return h(a,function(a,b){switch(b.charAt(0)){case"@":this.classDefine(b.substring(1),a);break;case"~":b=c.parameterize(b.substring(1)),this.on(b,a);break;default:m.test(b)?this.setProperty(c.camelize(b.toLowerCase()),a):i(a)?this.attribute(b,a):k(a)?this.define(b,a):this.attrDefault(b,a)}},this),this},extend:function(a,b,c){return"string"==typeof a?(this[a]=d.override(this[name],b),c&&(r[c[0]]=c,c[0]=a)):d.extendOverriden(this,a),this},attribute:function(a,b){var c,d,e,f;for(c in b)if(b.hasOwnProperty(c)&&(d=r[c])){for(e=[a,b[c]],f=1;f<d.length;f++)e.push(b[d[f]]);e.push(b),this[d[0]].apply(this,e)}return this},defer:function(a){return j.push(a),this},setProperty:function(b,c){return a[b]=c,this},attrDefault:function(a,c){return b.push([a,c]),this},attrMeta:function(a,b){return q[a]=l(q[a]||{},b),this},setNameDecoder:g.setNameDecoder,setNameEncoder:g.setNameEncoder,attrMask:g.setMask,attrMap:g.setMapping,attrDecoder:g.setDecoder,attrEncoder:g.setEncoder,define:n,classDefine:o,on:p},this.buildModel=function(){var c=f(a,b,g,q);return h(j,function(a){a(c)}),c}}var h=a.forEach,i=a.isObject,j=a.isArray,k=a.isFunction,l=a.extend,m=/^[A-Z]+[A-Z_0-9]*$/,n=function(a,b){return this.defer(function(c){"object"==typeof a?d.extendOverriden(c.prototype,a):c.prototype[a]=d.override(c.prototype[a],b)})},o=function(a,b){return this.defer(function(c){"object"==typeof a?(d.extendOverriden(c,a),d.extendOverriden(c.collectionPrototype,a)):(c[a]=d.override(c[a],b),c.collectionPrototype[a]=d.override(c.collectionPrototype[a],b))})},p=function(a,b){return this.defer(function(c){c.$on(a,b)})};return g.prototype={loadMixinChain:function(a){for(var b=0,c=a.length;c>b;b++)this.loadMixin(a[b])},loadMixin:function(a){a.$chain?this.loadMixinChain(a.$chain):"string"==typeof a?this.loadMixin(b.get(a)):j(a)||k(a)?b.invoke(a,this.dsl,{$builder:this.dsl}):this.dsl.describe(a)}},g}]),c.factory("RMCollectionApi",["RMUtils","RMPackerCache",function(c,d){var e=a.extend;return{$url:function(){return this.$scope.$url()},$urlFor:function(a){var b=this.$type.$url();return c.joinUrl(b?b:this.$url(),a)},$decode:function(b,c){if(!b||!a.isArray(b))throw new Error("Error in resource {0} configuration. Expected response to be array");this.$resolved||(this.length=0);for(var d=0,e=b.length;e>d;d++)this.$buildRaw(b[d],c).$reveal();return this.$dispatch("after-feed-many",[b]),this.$resolved=!0,this},$encode:function(a){for(var b=[],c=0,d=this.length;d>c;c++)b.push(this[c].$encode(a));return this.$dispatch("before-render-many",[b]),b},$unwrap:function(a,b){try{return d.prepare(),a=this.$$unpack(a),this.$decode(a,b)}finally{d.clear()}},$wrap:function(a){var b=this.$encode(a);return b=this.$$pack(b)},$reset:function(){return this.$cancel(),this.$resolved=!1,this},$fetch:function(a){var b={method:"GET",url:this.$url(),params:this.$params};return a&&(b.params=b.params?e(b.params,a):a),this.$dispatch("before-fetch-many",[b]),this.$send(b,function(a){this.$unwrap(a.data),this.$dispatch("after-fetch-many",[a])},function(a){this.$dispatch("after-fetch-many-error",[a])})},$refresh:function(a){return this.$reset().$fetch(a)},$add:function(a,c){return a.$position===b&&(c!==b?this.splice(c,0,a):this.push(a),a.$position=!0,this.$dispatch("after-add",[a])),this},$remove:function(a){var c=this.$indexOf(a);return-1!==c&&(this.splice(c,1),a.$position=b,this.$dispatch("after-remove",[a])),this},$indexOf:function(a){for(var b="function"==typeof a?a:!1,c=0,d=this.length;d>c;c++)if(b?b(this[c]):this[c]===a)return c;return-1}}}]),c.factory("RMCommonApi",["$http","$q",function(c,d){var e=[],f={$dispatch:function(a,c,d){var f,g,h,i=this.$$dsp;if(d||(d=this),i&&(this.$$dsp=b,i(a,c,d)),this.$$cb&&(f=this.$$cb[a]))for(g=0;h=f[g];g++)h.apply(d,c||e);return this.$scope&&this.$scope.$dispatch?this.$scope.$dispatch(a,c,d):this.$type&&this.$type.$dispatch(a,c,d),this.$$dsp=i,this},$on:function(a,b){var c=(this.$$cb||(this.$$cb={}))[a]||(this.$$cb[a]=[]);return c.push(b),this},$decorate:function(a,b){var c=this.$$dsp;this.$$dsp="function"!=typeof a&&a?function(b,d,f){c&&c.apply(null,arguments);var g=a[b];g&&g.apply(f,d||e)}:a;try{return b.call(this)}finally{this.$$dsp=c}},$dispatcher:function(){return this.$$dsp},$then:function(a,b){return this.$promise||(this.$promise=d.when(this)),this.$promise=this.$promise.then(a,b),this},$finally:function(a){return this.$promise||(this.$promise=d.when(this)),this.$promise=this.$promise["finally"](a),this},$send:function(a,e,f){function g(){if(a.canceled)return h.$pending.splice(0,1),h.$status="canceled",d.when(h);h.$decorate(i,function(){this.$response=null,this.$status="pending",this.$dispatch("before-request",[a])});var g=c(a).then(function(c){return h.$decorate(i,function(){return this.$pending.splice(0,1),this.$promise===g&&(this.$promise=b),a.canceled?this.$status="canceled":(this.$status="ok",this.$response=c,this.$dispatch("after-request",[c]),e&&e.call(this,c)),this})},function(c){return h.$decorate(i,function(){return this.$pending.splice(0,1),this.$promise===g&&(this.$promise=b),a.canceled?(this.$status="canceled",this):(this.$status="error",this.$response=c,this.$dispatch("after-request-error",[c]),f&&f.call(this,c),d.reject(this))})});return g}var h=this,i=this.$dispatcher();return this.$pending=this.$pending||[],this.$pending.push(a),this.$promise=this.$promise?this.$promise.then(g,g):g(),this},$cancel:function(){return this.$pending&&a.forEach(this.$pending,function(a){a.canceled=!0}),this.$promise=null,this},$hasPendingRequests:function(){var b=0;return this.$pending&&a.forEach(this.$pending,function(a){a.canceled||b++}),b>0}};return f}]),c.factory("DefaultPacker",["inflector","RMPackerCache",function(a,b){function c(a){this.single=a.$getProperty("jsonRootSingle")||a.$getProperty("jsonRoot")||a.$getProperty("name"),this.plural=a.$getProperty("jsonRootMany")||a.$getProperty("jsonRoot")||a.$getProperty("plural"),this.links=a.$getProperty("jsonLinks","linked"),this.meta=a.$getProperty("jsonMeta","meta")}function d(a,b,c){var d=a.meta;if("string"==typeof d){if("."===d){var e={};for(var f in b)b.hasOwnProperty(f)&&f!==c&&f!==a.links&&(e[f]=b[f]);return e}return b[d]}return"function"==typeof d?d(b):void 0}function e(a,c,d){var e="."===a.links?c:c[a.links];if(e)for(var f in e)if(e.hasOwnProperty(f)&&f!==d){var g=e[f];b.feed(f,g)}}return c.prototype={unpack:function(a,b){return this.meta&&(b.$metadata=d(this,a,this.single)),this.links&&e(this,a,this.single),a[this.single]},unpackMany:function(a,b){return this.meta&&(b.$metadata=d(this,a,this.plural)),this.links&&e(this,a,this.plural),a[this.plural]},pack:function(a){return a},packMany:function(a){return a}},function(a){return new c(a)}}]),c.factory("RMModelFactory",["$injector","inflector","RMUtils","RMScopeApi","RMCommonApi","RMRecordApi","RMCollectionApi",function(c,d,e,f,g,h,i){var j=/(.*?)([^\/]+)\/?$/,k=a.extend;return function(a,l,m,n){function o(a,b){this.$type=o,this.$scope=a||o,this.$pk=b,this.$initialize()}function p(a,b){var c=new v;return c.$isCollection=!0,c.$type=o,c.$scope=a,c.$params=b,c.$resolved=!1,c}function q(a){return function(b){if(u){var c="function"==typeof u?u(o):u;b=c[a](b,this)}return b}}var r=a.urlPrefix,s=e.cleanUrl(a.url),t=a.primaryKey,u=a.packer;!a.name&&s&&(a.name=d.singularize(s.replace(j,"$2"))),!a.plural&&a.name&&(a.plural=d.pluralize(a.name)),"string"==typeof u&&(u=c.get(d.camelize(u,!0)+"Packer"));var v=e.buildArrayType();return k(o,{$$inferKey:function(a){return a&&"undefined"!=typeof a[t]?a[t]:null},$$new:function(a,b){return new o(b||o,a)},$$collection:function(a,b){return p(b||o,a)},$$getDescription:function(a){return n[a]},$getProperty:function(c,d){var e=a[c];return e!==b?e:d},$anonymous:function(){return!s},$single:function(a){return new o({$urlFor:function(){return r?e.joinUrl(r,a):a}},"")},$url:function(){return r?e.joinUrl(r,s):s},$name:function(b){return b?a.plural:a.name},$urlFor:function(a){return e.joinUrl(this.$url(),a)}},f,g),k(o.prototype,{$$inferKey:o.$$inferKey,$$loadDefaults:function(){for(var a,b=0;a=l[b];b++)this[a[0]]="function"==typeof a[1]?a[1].apply(this):a[1]},$$pack:q("pack"),$$unpack:q("unpack"),$$decode:function(a,b){return m.decode(this,a,b)},$$encode:function(a){return m.encode(this,a)}},h,g),k(v.prototype,{$$inferKey:o.$$inferKey,$$new:function(a,b){return new o(b||this,a)},$$collection:function(a,b){return a=this.$params?k({},this.$params,a):a,p(b||this.$scope,a)},$$pack:q("packMany"),$$unpack:q("unpackMany")},i,f,g),o.collectionPrototype=v.prototype,o}}]),c.factory("RMPackerCache",[function(){var a;return{feed:function(b,c){a[b]=c},resolve:function(b){if(a){var c=b.$type,d=a[c.$name(!0)];if(d&&b.$pk)for(var e=0,f=d.length;f>e;e++)if(b.$pk===c.$$inferKey(d[e])){b.$decode(d[e]);break}}return b},prepare:function(){a={}},clear:function(){a=null}}}]),c.factory("RMRecordApi",["RMUtils","RMPackerCache",function(a,c){var d=function(b,c,d){this.$scope=b,this.$target=c,this.$partial=a.cleanUrl(d)};return d.prototype={$url:function(){return a.joinUrl(this.$scope.$url(),this.$partial)},$urlFor:function(a){return this.$target.$anonymous()?this.$fetchUrlFor():this.$target.$urlFor(a)},$fetchUrlFor:function(){return a.joinUrl(this.$scope.$url(),this.$partial)},$createUrlFor:function(){return null}},{$initialize:function(){this.$$loadDefaults(),this.$dispatch("after-init")},$url:function(){return this.$scope.$urlFor(this.$pk)},$buildScope:function(a,b){return a.$buildOwnScope?void 0:new d(this,a,b)},$extend:function(a){for(var b in a)a.hasOwnProperty(b)&&"$"!==b[0]&&(this[b]=a[b]);return this},$each:function(a,b){for(var c in this)this.hasOwnProperty(c)&&"$"!==c[0]&&a.call(b||this[c],this[c],c);return this},$decode:function(b,c){return this.$$decode(b,c||a.READ_MASK),this.$pk||(this.$pk=this.$$inferKey(b)),this.$dispatch("after-feed",[b]),this},$encode:function(b){var c=this.$$encode(b||a.CREATE_MASK);return this.$dispatch("before-render",[c]),c},$unwrap:function(a,b){try{return c.prepare(),a=this.$$unpack(a),this.$decode(a,b)}finally{c.clear()}},$wrap:function(a){var b=this.$encode(a);return b=this.$$pack(b)},$fetch:function(a){var b=this.$scope.$fetchUrlFor?this.$scope.$fetchUrlFor(this.$pk):this.$url();if(!b)throw new Error("Cannot fetch an unbound resource");var c={method:"GET",url:b,params:a};return this.$dispatch("before-fetch",[c]),this.$send(c,function(a){this.$unwrap(a.data),this.$dispatch("after-fetch",[a])},function(a){this.$dispatch("after-fetch-error",[a])})},$save:function(){var c,d=this.$scope.$updateUrlFor?this.$scope.$updateUrlFor(this.$pk):this.$url();if(d)return c={method:"PUT",url:d,data:this.$wrap(a.UPDATE_MASK)},this.$dispatch("before-update",[c]),this.$dispatch("before-save",[c]),this.$send(c,function(a){this.$unwrap(a.data),this.$dispatch("after-update",[a]),this.$dispatch("after-save",[a])},function(a){this.$dispatch("after-update-error",[a]),this.$dispatch("after-save-error",[a])});if(d=this.$scope.$createUrlFor?this.$scope.$createUrlFor(this.$pk):this.$scope.$url&&this.$scope.$url(),!d)throw new Error("Create is not supported by this resource");return c={method:"POST",url:d,data:this.$wrap(a.CREATE_MASK)},this.$dispatch("before-save",[c]),this.$dispatch("before-create",[c]),this.$send(c,function(a){this.$unwrap(a.data),this.$scope.$isCollection&&this.$position===b&&!this.$preventReveal&&this.$scope.$add(this,this.$revealAt),this.$dispatch("after-create",[a]),this.$dispatch("after-save",[a])},function(a){this.$dispatch("after-create-error",[a]),this.$dispatch("after-save-error",[a])})},$destroy:function(){var a=this.$scope.$destroyUrlFor?this.$scope.$destroyUrlFor(this.$pk):this.$url();if(!a)throw new Error("Cannot destroy an unbound resource");var b={method:"DELETE",url:a};return this.$dispatch("before-destroy",[b]),this.$send(b,function(a){this.$scope.$remove&&this.$scope.$remove(this),this.$dispatch("after-destroy",[a])},function(a){this.$dispatch("after-destroy-error",[a])})},$moveTo:function(a){return this.$position!==b||(this.$revealAt=a),this},$reveal:function(a){return a===b||a?this.$scope.$add(this,this.$revealAt):this.$preventReveal=!0,this}}}]),c.factory("RMScopeApi",[function(){return{$new:function(a,b){return this.$$new(a,b)},$build:function(a){return this.$new().$extend(a)},$buildRaw:function(a,b){var c=this.$new(this.$$inferKey(a));return c.$decode(a,b),c},$find:function(a,b){return this.$new(a).$fetch(b)},$create:function(a){return this.$build(a).$save()},$collection:function(a,b){return this.$$collection(a,b)},$search:function(a){return this.$collection(a).$fetch()}}}]),c.factory("RMSerializerFactory",["$injector","inflector","$filter","RMUtils",function(c,d,e,f){function g(a,b){for(var c,d=0;a&&(c=b[d]);d++)a=a[c];return a}function h(a,b,c){for(var d=0,e=b.length-1;e>d;d++){var f=b[d];a=a[f]||(a[f]={})}a[b[b.length-1]]=c}return function(){function c(a,b){var c=n[a];return c&&(c===!0||-1!==c.indexOf(b))}function i(a,d,e,f,h){var i,k,l,m,n,o,p,u,v=e?e+".":"";if(n=r[e])for(p=0,u=n.length;u>p;p++)l=v+n[p].path,c(l,f)||(m=n[p].map?g(a,n[p].map):a[t?t(n[p].path):n[p].path],(n[p].forced||m!==b)&&(m=j(m,l,f,h),m!==b&&(d[n[p].path]=m)));for(i in a)if(a.hasOwnProperty(i)){if(k=s?s(i):i,"$"===k[0])continue;if(n){for(o=!1,p=0,u=n.length;u>p&&!(o=n[p].mapPath===i);p++);if(o)continue}if(l=v+k,q[l]||c(l,f))continue;m=j(a[i],l,f,h),m!==b&&(d[k]=m)}}function j(a,b,c,d){var e=o[b],f=a;if(e)f=e.call(d,a);else if("object"==typeof a)if(m(a)){f=[];for(var g=0,h=a.length;h>g;g++)f.push(j(a[g],b+"[]",c,d))}else a&&(f={},i(a,f,b,c,d));return f}function k(a,d,e,f,g){var i,j,k,m,n,o=e?e+".":"";for(i in a)if(a.hasOwnProperty(i)&&"$"!==i[0]){if(j=o+i,q[j]||c(j,f))continue;m=l(a[i],j,f,g),m!==b&&(k=t?t(i):i,d[k]=m)}if(n=r[e])for(var p=0,s=n.length;s>p;p++)j=o+n[p].path,c(j,f)||(m=a[n[p].path],(n[p].forced||m!==b)&&(m=l(m,j,f,g),m!==b&&(n[p].map?h(d,n[p].map,m):d[t?t(n[p].path):n[p].path]=m)))}function l(a,b,c,d){var e=p[b],f=a;if(e)f=e.call(d,a);else if(null!==a&&"object"==typeof a&&"function"!=typeof a.toJSON)if(m(a)){f=[];for(var g=0,h=a.length;h>g;g++)f.push(l(a[g],b+"[]",c,d))}else a&&(f={},k(a,f,b,c,d));return f}var m=a.isArray,n={},o={},p={},q={},r={},s=d.camelize,t=function(a){return d.parameterize(a,"_")};return{setNameDecoder:function(a){return s=a,this},setNameEncoder:function(a){return t=a,this},setMapping:function(a,b,c){var d=a.lastIndexOf("."),e=-1!==d?a.substr(0,d):"",f=-1!==d?a.substr(d+1):a;q[a]=!0;var g=r[e]||(r[e]=[]);return g.push({path:f,map:"*"===b?null:b.split("."),mapPath:b,forced:c}),this},setMask:function(a,b){return b?n[a]=b:delete n[a],this},setDecoder:function(a,b,c,d){if("string"==typeof b){var g=e(b);b=function(a){return g(a,c)}}return o[a]=d?f.chain(o[a],b):b,this},setEncoder:function(a,b,c,d){if("string"==typeof b){var g=e(b);b=function(a){return g(a,c)}}return p[a]=d?f.chain(p[a],b):b,this},decode:function(a,b,c){i(b,a,"",c,a)},encode:function(a,b){var c={};return k(a,c,"",b,a),c}}}}]),c.factory("RMUtils",[function(){return{CREATE_MASK:"C",UPDATE_MASK:"U",READ_MASK:"R",WRITE_MASK:"CU",FULL_MASK:"CRU",joinUrl:function(a,b){return a&&b?(a+"").replace(/\/$/,"")+"/"+(b+"").replace(/^\//,""):null},cleanUrl:function(a){return a?a.replace(/\/$/,""):a},chain:function(a,b){return a?function(c){return b.call(this,a.call(this,c))}:b},override:function(a,b){return a&&"function"==typeof b?function(){var c=this.$super;try{return this.$super=a,b.apply(this,arguments)}finally{this.$super=c}}:b},extendOverriden:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=this.override(a[c],b[c]))},buildArrayType:function(){var a,b=!0;if(b){var c=document.createElement("iframe");c.style.display="none",document.body.appendChild(c),frames[frames.length-1].document.write("<script>parent.RestmodArray = Array;</script>"),a=window.RestmodArray,delete window.RestmodArray,document.body.removeChild(c)}else a=function(){},a.prototype=[];return a}}}])}(angular);